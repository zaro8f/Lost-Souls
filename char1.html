<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Даймон — LOST SOULS</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div class="lore-bg"></div>

  <!-- Изображение в полный рост -->
  <aside class="char-img">
    <img src="img/Daimon.jpg" alt="Даймон_ОС"/>
  </aside>

  <!-- Лор -->
  <main class="lore-text">
    <h1>Даймон</h1>
    <h2>"Дуэлист"</h2>
    <p>
      Даймон - является Стилистом класса "Дуэлист". Специализируется на боях 1 на 1. Способен совершать моментальные удары по врагу и телепортироваться.
      Может создавать пространство называемое "Ринг" после того как оттягивает от врага сгусток души,
      после чего Даймона и врага окружает кольцо пламени и переносит на "Ринг".
    </p>
    <p>
      В прошлом был обычным мальчишкой. Родился в деревне "Ваншу" с осквернённой душой. Часто играл с друзьями в лесу у реки.
      В один день у Даймона произошёл переломный момент в его жизни, из-за которого он потерял своё тело и душу. Теперь он вынужден скитаться по миру
      будучи просто сгустком пламени, но при этом теперь он имеет душу древнего Стилиста, что и наделила его силой для мести.
    </p>
    
  </main>
</body>

<!-- Плеер -->
<div class="player">
  <audio id="theme" src="songs/Daimon_theme.mp3" preload="auto"></audio>

  <div class="player-controls">
    <button class="player-btn" id="playBtn" title="Play / Pause">
      <svg class="icon" viewBox="0 0 24 24">
        <path id="iconPlay"  d="M8 5v14l11-7z"/>
        <path id="iconPause" d="M6 19h4V5H6zm8-14v14h4V5z" style="display:none"/>
      </svg>
    </button>

    <span class="player-time" id="time">0:00</span>

    <input type="range" class="player-progress" id="bar" min="0" max="100" value="0">

    <!-- контейнер для кнопки + ползунка -->
    <div class="volume-wrap">
      <button class="player-btn" id="volBtn" title="Mute / Unmute">
        <svg class="icon" viewBox="0 0 24 24">
          <path id="iconVol"  d="M3 9v6h4l5 5V4L7 9zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
          <path id="iconMute" d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9z" style="display:none"/>
        </svg>
      </button>
      <input type="range" class="player-volume" min="0" max="1" step="0.05" value="1">
    </div>
  </div>
</div>

<script>
  const audio      = document.getElementById('theme');
  const playBtn    = document.getElementById('playBtn');
  const timeLabel  = document.getElementById('time');
  const bar        = document.getElementById('bar');
  const volBtn     = document.getElementById('volBtn');
  const volSlider  = document.querySelector('.player-volume');

  const iconPlay  = document.getElementById('iconPlay');
  const iconPause = document.getElementById('iconPause');
  const iconVol   = document.getElementById('iconVol');
  const iconMute  = document.getElementById('iconMute');

  let isPlaying = false;

  /* play / pause */
  playBtn.addEventListener('click', () => {
    if (isPlaying) {
      audio.pause();
      iconPlay.style.display  = 'block';
      iconPause.style.display = 'none';
    } else {
      audio.play();
      iconPlay.style.display  = 'none';
      iconPause.style.display = 'block';
    }
    isPlaying = !isPlaying;
  });

  /* mute / unmute */
  volBtn.addEventListener('click', () => {
    audio.muted = !audio.muted;
    iconVol.style.display  = audio.muted ? 'none' : 'block';
    iconMute.style.display = audio.muted ? 'block' : 'none';
  });

  /* прогресс и громкость */
  audio.addEventListener('timeupdate', () => {
    const cur = Math.floor(audio.currentTime);
    const min = Math.floor(cur / 60);
    const sec = cur % 60;
    timeLabel.textContent = `${min}:${sec < 10 ? '0' + sec : sec}`;
    bar.value = (audio.currentTime / audio.duration) * 100 || 0;
  });
  bar.addEventListener('input', () => {
    audio.currentTime = (bar.value / 100) * audio.duration;
  });
  volSlider.addEventListener('input', () => {
    audio.volume = volSlider.value;
  });
  /* --- синхронизируем цветную дорожку --- */
function updateProgressBar(el, val){            // el = range, val = 0-100
  el.style.setProperty('--progress', val);
}

/* таймлайн */
bar.addEventListener('input', () => {
  audio.currentTime = (bar.value / 100) * audio.duration;
  updateProgressBar(bar, bar.value);
});
audio.addEventListener('timeupdate', () => {
  const percent = (audio.currentTime / audio.duration) * 100 || 0;
  bar.value = percent;
  updateProgressBar(bar, percent);
});

/* громкость */
volSlider.addEventListener('input', () => {
  audio.volume = volSlider.value;
  updateProgressBar(volSlider, volSlider.value * 100);
});
/* первичная заливка */
updateProgressBar(bar, 0);
updateProgressBar(volSlider, 100);
</script>

<!-- Кнопка «Назад» идёт после плеера -->
<div class="footer-center">
  <a href="index.html" class="btn-back">Назад</a>
</div>
